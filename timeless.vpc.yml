vpc:
  name: timeless
  cidr: 172.16.0.0/16

  region: us-east-1
  availability_zone: us-east-1b
  hosted_zone_id: ZEPX1Q8LGM34G

  ansible_groups:
    timeless:
      - timeless-web

  security:
    keypair: weedlabs-master
    private_key_location: ~/.ssh/weedlabs-master.pem

  tiers:
    - name: web
      cidr: 172.16.0.0/24
      public: yes
      firewall:
        outbound:
          - destination: 0.0.0.0/0
            protocol: TCP
            port: 80
            label: HTTP out

          - destination: 0.0.0.0/0
            protocol: TCP
            port: 443
            label: HTTPS out

          - destination: 0.0.0.0/0
            protocol: TCP
            port: 22
            label: SSH out


        inbound:
          - source: 0.0.0.0/0
            protocol: TCP
            port: 22
            label: SSH from anywhere

          - source: 0.0.0.0/0
            protocol: TCP
            port: 443
            label: HTTPS in

          - source: 0.0.0.0/0
            protocol: TCP
            port: 80
            label: HTTP in


  machines:
    - name: timeless-web
      domain: timeless.me
      ami-id: ami-e84d8480
      user: ubuntu
      instance-type: m1.small
      tier: web
      public: yes
      ansible_roles_path: ~/projects/personal/timeless/deploy
      ansible:
        sudo: yes
        user: "ubuntu"
        remote_user: "ubuntu"

        roles:
          - base/common
          - base/ntp
          - base/cassandra
          - base/redis
          - base/nodejs
          - base/nginx
          - apps/timeless

        vars:
          cassandra:
            version: '2.0.1'
            version_branch: '2.0'

            repo_key_url: 'http://keyserver.ubuntu.com/pks/lookup?op=get&fingerprint=on&search=0x4BD736A82B5C1B00'
            repo_key_file: '4BD736A82B5C1B00.gpg'
            dependencies:
              - 'openjdk-7-jre'
              - 'openjdk-7-jdk'